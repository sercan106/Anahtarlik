{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:etiket_etiket_changelist' %}">Etiketler</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<form method="post">
    {% csrf_token %}
    <fieldset class="module aligned">
        <h2>Etiket Tahsis İşlemi</h2>
        
        <div class="form-row">
            <div>
                <label for="{{ form.kanal.id_for_label }}">{{ form.kanal.label }}:</label>
                {{ form.kanal }}
                {% if form.kanal.errors %}
                    <ul class="errorlist">
                        {% for error in form.kanal.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="{{ form.veteriner.id_for_label }}">{{ form.veteriner.label }}:</label>
                {{ form.veteriner }}
                {% if form.veteriner.errors %}
                    <ul class="errorlist">
                        {% for error in form.veteriner.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="{{ form.petshop.id_for_label }}">{{ form.petshop.label }}:</label>
                {{ form.petshop }}
                {% if form.petshop.errors %}
                    <ul class="errorlist">
                        {% for error in form.petshop.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </fieldset>
    
    <div class="submit-row">
        <input type="submit" value="Etiketleri Tahsis Et" class="default" />
        <a href="{% url 'admin:etiket_etiket_changelist' %}" class="button">İptal</a>
    </div>
</form>

<div class="help">
    <h3>Seçili Etiketler ({{ total_count }} adet):</h3>
    <ul>
        {% for etiket in queryset_display %}
            <li><strong>{{ etiket.seri_numarasi }}</strong> - {{ etiket.get_kanal_display|default:"Tahsissiz" }}</li>
        {% endfor %}
        {% if total_count > 50 %}
            <li><em>... ve {{ total_count|add:"-50" }} adet daha</em></li>
        {% endif %}
    </ul>
    
    <h3>Bilgi:</h3>
    <ul>
        <li><strong>Veteriner Kanalı:</strong> Veteriner seçilmelidir</li>
        <li><strong>Petshop Kanalı:</strong> Petshop seçilmelidir</li>
        <li><strong>Online/Tahsissiz:</strong> Partner seçmeyin</li>
        <li><strong>Dikkat:</strong> Tahsis edilen etiketler geri alınamaz</li>
    </ul>
</div>
{% endblock %}










