{% extends 'ana.html' %}
{% load static %}

{% block title %}Etiket Hen√ºz Baƒülanmamƒ±≈ü - PetSafe Hub{% endblock %}

{% block css_dosyalar %}
<style>
    /* ================================================
       üè∑Ô∏è ETƒ∞KET BAƒûLANMAMI≈û SAYFASI
       Renk Paleti: #5B9BD5, #70C1B3, #FF8C42, #EB5757
       ================================================ */
    
    body {
        background: linear-gradient(135deg, #5B9BD5 0%, #70C1B3 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }
    
    .tag-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        max-width: 600px;
        width: 100%;
        overflow: hidden;
    }
    
    .tag-header {
        background: linear-gradient(135deg, #EB5757 0%, #ff6b6b 100%);
        color: white;
        border-radius: 24px 24px 0 0;
        text-align: center;
        padding: 40px 30px;
        position: relative;
        overflow: hidden;
    }
    
    .tag-header::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    .tag-icon {
        font-size: 4rem;
        margin-bottom: 16px;
        position: relative;
        z-index: 1;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
    
    .tag-header h2 {
        font-size: 1.75rem;
        font-weight: 700;
        margin: 0;
        position: relative;
        z-index: 1;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .tag-body {
        padding: 40px 30px;
        text-align: center;
    }
    
    .alert-warning-modern {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 2px solid #F2C94C;
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 24px;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .alert-warning-modern i {
        font-size: 1.5rem;
        color: #F2C94C;
    }
    
    .alert-warning-modern strong {
        color: #856404;
        font-weight: 600;
    }
    
    .tag-info-box {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        border-radius: 16px;
        padding: 24px;
        margin: 24px 0;
        text-align: left;
        border: 1px solid rgba(91, 155, 213, 0.1);
    }
    
    .tag-info-box h5 {
        color: #5B9BD5;
        font-weight: 700;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .tag-info-box p {
        color: #334155;
        margin-bottom: 12px;
        font-size: 0.95rem;
    }
    
    .tag-info-box p strong {
        color: #1e293b;
    }
    
    .tag-id-box {
        font-family: 'Courier New', monospace;
        background: white;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 0.9rem;
        color: #334155;
        border: 2px solid rgba(91, 155, 213, 0.2);
        margin-top: 8px;
    }
    
    .badge-modern {
        padding: 6px 14px;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.85rem;
    }
    
    .badge-info {
        background: linear-gradient(135deg, #5B9BD5 0%, #70C1B3 100%);
        color: white;
    }
    
    .badge-success {
        background: linear-gradient(135deg, #6FCF97 0%, #70C1B3 100%);
        color: white;
    }
    
    .badge-warning {
        background: linear-gradient(135deg, #F2C94C 0%, #FFB88C 100%);
        color: #1e293b;
    }
    
    .qr-section {
        margin-top: 24px;
        padding-top: 24px;
        border-top: 2px solid rgba(91, 155, 213, 0.1);
    }
    
    .qr-section h6 {
        color: #5B9BD5;
        font-weight: 700;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    
    #qrcode {
        display: inline-block;
        padding: 20px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(91, 155, 213, 0.12);
        border: 2px solid rgba(91, 155, 213, 0.1);
        min-height: 200px;
        min-width: 200px;
    }
    
    .qr-hint {
        font-size: 0.85rem;
        color: #64748b;
        margin-top: 12px;
    }
    
    .usage-steps {
        text-align: left;
        margin-top: 24px;
        padding-top: 24px;
        border-top: 2px solid rgba(91, 155, 213, 0.1);
    }
    
    .usage-steps h6 {
        color: #334155;
        font-weight: 700;
        margin-bottom: 16px;
    }
    
    .usage-steps ol {
        padding-left: 24px;
        color: #64748b;
        line-height: 1.8;
    }
    
    .usage-steps ol li {
        margin-bottom: 8px;
    }
    
    .btn-home {
        background: linear-gradient(135deg, #5B9BD5 0%, #70C1B3 100%);
        color: white;
        border: none;
        border-radius: 50px;
        padding: 14px 32px;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 6px 20px rgba(91, 155, 213, 0.35);
        margin-top: 24px;
    }
    
    .btn-home:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(91, 155, 213, 0.45);
        color: white;
        text-decoration: none;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        body {
            padding: 15px;
        }
        
        .tag-header {
            padding: 30px 20px;
        }
        
        .tag-icon {
            font-size: 3rem;
        }
        
        .tag-header h2 {
            font-size: 1.5rem;
        }
        
        .tag-body {
            padding: 30px 20px;
        }
        
        .tag-info-box {
            padding: 20px;
        }
        
        #qrcode {
            min-height: 150px;
            min-width: 150px;
        }
    }
    
    @media (prefers-reduced-motion: reduce) {
        .tag-header::before {
            animation: none;
        }
        
        .tag-icon {
            animation: none;
        }
        
        .btn-home {
            transition: none;
        }
        
        .btn-home:hover {
            transform: none;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="tag-card">
                <div class="tag-header">
                    <i class="fas fa-tag tag-icon"></i>
                    <h2>Etiket Hen√ºz Baƒülanmamƒ±≈ü</h2>
                </div>
                <div class="tag-body">
                    <div class="alert-warning-modern">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Bu etiket hen√ºz bir evcil hayvana baƒülanmamƒ±≈ü.</strong>
                    </div>
                    
                    <div class="tag-info-box">
                        <h5><i class="fas fa-info-circle"></i>Etiket Bilgileri</h5>
                        <p><strong>Seri No:</strong> {{ etiket.seri_numarasi }}</p>
                        <p><strong>Etiket ID:</strong></p>
                        <div class="tag-id-box">{{ tag_id }}</div>
                        <p class="mt-3 mb-0"><strong>Kanal:</strong> 
                            {% if etiket.kanal == 'ONLINE' %}
                                <span class="badge-modern badge-info">Online</span>
                            {% elif etiket.kanal == 'VET' %}
                                <span class="badge-modern badge-success">Veteriner</span>
                            {% elif etiket.kanal == 'SHOP' %}
                                <span class="badge-modern badge-warning">Petshop</span>
                            {% else %}
                                <span class="badge-modern" style="background: #6c757d; color: white;">{{ etiket.kanal }}</span>
                            {% endif %}
                        </p>
                    </div>
                    
                    <div class="qr-section">
                        <h6><i class="fas fa-qrcode"></i>QR Kod</h6>
                        <div id="qrcode"></div>
                        <p class="qr-hint">Bu QR kodu tarayarak etiket bilgilerine eri≈üebilirsiniz</p>
                    </div>
                    
                    <div class="usage-steps">
                        <h6>Bu etiket nasƒ±l kullanƒ±lƒ±r?</h6>
                        <ol>
                            <li>Etiket sahibi evcil hayvanƒ±nƒ± sisteme kaydetmelidir</li>
                            <li>Evcil hayvan kaydƒ± sƒ±rasƒ±nda bu etiket seri numarasƒ± girilmelidir</li>
                            <li>Etiket baƒülandƒ±ktan sonra QR kod tarandƒ±ƒüƒ±nda evcil hayvan bilgileri g√∂r√ºnecektir</li>
                        </ol>
                    </div>
                    
                    <a href="{% url 'anahtarlik:ev' %}" class="btn-home">
                        <i class="fas fa-home"></i>Ana Sayfaya D√∂n
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const qrUrl = window.location.href;
    const qrContainer = document.getElementById('qrcode');
    
    const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(qrUrl)}`;
    
    const img = document.createElement('img');
    img.src = qrApiUrl;
    img.alt = 'QR Kod';
    img.style.width = '200px';
    img.style.height = '200px';
    img.loading = 'lazy';
    img.onerror = function() {
        qrContainer.innerHTML = '<p class="text-danger"><i class="fas fa-exclamation-triangle"></i> QR kod y√ºklenemedi</p>';
    };
    qrContainer.innerHTML = '';
    qrContainer.appendChild(img);
});
</script>
{% endblock %}
